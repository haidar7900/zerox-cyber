<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مدافع الأمن السيبراني - فريق Zerox</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --primary-color: #2dd4bf;
            --secondary-color: #a78bfa;
            --dark-bg: #0b1220;
            --darker-bg: #07101b;
            --text-color: #e6eef6;
            --card-bg: rgba(255, 255, 255, 0.05);
            --border-color: rgba(255, 255, 255, 0.1);
            --success-color: #2ed573;
            --error-color: #ff6b6b;
            --warning-color: #ffa502;
            --info-color: #3742fa;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Tajawal', sans-serif;
            background: linear-gradient(135deg, var(--dark-bg), var(--darker-bg));
            color: var(--text-color);
            min-height: 100vh;
            line-height: 1.6;
            padding: 20px;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            padding: 40px 0;
            position: relative;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-color);
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 800;
        }

        .header p {
            font-size: 1.2rem;
            color: #94a3b8;
            max-width: 600px;
            margin: 0 auto;
        }

        .language-switch {
            position: absolute;
            top: 20px;
            left: 20px;
            display: flex;
            gap: 10px;
            z-index: 1000;
        }

        .lang-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--border-color);
            color: var(--text-color);
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-family: 'Tajawal', sans-serif;
            transition: all 0.3s ease;
            font-size: 14px;
            backdrop-filter: blur(10px);
        }

        .lang-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .lang-btn.active {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: #041025;
            font-weight: bold;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 30px;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }

        .card h3 {
            font-size: 1.4rem;
            margin-bottom: 15px;
            color: var(--primary-color);
        }

        .advanced-section {
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
        }

        .advanced-options {
            display: flex;
            gap: 12px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .advanced-options button {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: #041025;
            border: none;
            padding: 12px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-family: 'Tajawal', sans-serif;
            font-weight: 600;
            transition: all 0.3s ease;
            flex: 1;
            min-width: 150px;
        }

        .advanced-options button:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(45, 212, 191, 0.4);
        }

        /* واجهة الأسئلة */
        .game-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 4000;
            backdrop-filter: blur(5px);
        }

        .game-content {
            background: linear-gradient(135deg, var(--dark-bg), var(--darker-bg));
            padding: 30px;
            border-radius: 20px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            border: 1px solid var(--border-color);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
        }

        .game-stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            padding: 15px;
            background: var(--card-bg);
            border-radius: 10px;
        }

        .game-question {
            font-size: 1.3rem;
            margin-bottom: 25px;
            color: var(--text-color);
            line-height: 1.6;
            text-align: center;
        }

        .game-answers {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin-bottom: 25px;
        }

        .game-answer-btn {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            color: var(--text-color);
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            text-align: right;
            transition: all 0.3s ease;
            font-size: 1rem;
            backdrop-filter: blur(5px);
        }

        .game-answer-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(-5px);
        }

        .game-answer-btn.correct {
            background: var(--success-color);
            color: white;
        }

        .game-answer-btn.wrong {
            background: var(--error-color);
            color: white;
        }

        .game-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .game-buttons button {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: #041025;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .game-buttons button:hover {
            transform: translateY(-2px);
        }

        /* لوحة المتصدرين */
        .leaderboard-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 4000;
            backdrop-filter: blur(5px);
        }

        .leaderboard-content {
            background: linear-gradient(135deg, var(--dark-bg), var(--darker-bg));
            padding: 30px;
            border-radius: 20px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            border: 1px solid var(--border-color);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
        }

        .leaderboard-list {
            margin: 20px 0;
        }

        .leaderboard-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            margin: 8px 0;
            background: var(--card-bg);
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }

        .leaderboard-rank {
            font-weight: bold;
            font-size: 1.1rem;
            width: 30px;
            text-align: center;
        }

        .rank-1 { color: gold; }
        .rank-2 { color: silver; }
        .rank-3 { color: #cd7f32; }

        .leaderboard-name {
            flex: 1;
            margin: 0 15px;
        }

        .leaderboard-score {
            font-weight: bold;
            color: var(--primary-color);
        }

        /* نافذة التحدي اليومي */
        .challenge-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 4000;
            backdrop-filter: blur(5px);
        }

        .challenge-content {
            background: linear-gradient(135deg, var(--dark-bg), var(--darker-bg));
            padding: 30px;
            border-radius: 20px;
            max-width: 500px;
            width: 90%;
            border: 1px solid var(--border-color);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
        }

        .challenge-question {
            font-size: 1.2rem;
            margin-bottom: 20px;
            color: var(--text-color);
            line-height: 1.5;
        }

        .challenge-answers {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }

        .challenge-answer {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            color: var(--text-color);
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            text-align: right;
            transition: all 0.3s ease;
        }

        .challenge-answer:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(-5px);
        }

        .challenge-answer.correct {
            background: var(--success-color);
            color: white;
        }

        .challenge-answer.wrong {
            background: var(--error-color);
            color: white;
        }

        .challenge-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .challenge-buttons button {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: #041025;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
        }

        .enhanced-message {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 10px;
            color: white;
            z-index: 3000;
            animation: slideInRight 0.3s ease;
            font-weight: 600;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
        }

        .enhanced-message.success {
            background: linear-gradient(45deg, var(--success-color), #1dd1a1);
        }

        .enhanced-message.error {
            background: linear-gradient(45deg, var(--error-color), #ee5a24);
        }

        .enhanced-message.info {
            background: linear-gradient(45deg, #3742fa, #5352ed);
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .progress-bar {
            height: 8px;
            background: var(--card-bg);
            border-radius: 4px;
            margin: 15px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .game-btn {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: #041025;
            border: none;
            padding: 12px 25px;
            border-radius: 10px;
            cursor: pointer;
            font-family: 'Tajawal', sans-serif;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .game-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(45, 212, 191, 0.4);
        }

        .level-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--border-color);
            color: var(--text-color);
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
            backdrop-filter: blur(5px);
        }

        .level-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .level-btn.active {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: #041025;
            font-weight: bold;
        }

        /* أنماط جديدة للميزات المضافة */
        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .achievement-card {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .achievement-card:hover {
            transform: scale(1.05);
        }

        .achievement-card.locked {
            opacity: 0.5;
            filter: grayscale(1);
        }

        .achievement-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .achievement-title {
            font-size: 0.9rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .achievement-desc {
            font-size: 0.7rem;
            color: #94a3b8;
        }

        .skills-tree {
            margin-top: 15px;
        }

        .skill-node {
            background: var(--card-bg);
            border-radius: 8px;
            padding: 10px;
            margin: 8px 0;
            border: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            transition: all 0.3s ease;
        }

        .skill-node.unlocked {
            border-color: var(--primary-color);
            background: rgba(45, 212, 191, 0.1);
        }

        .skill-icon {
            width: 30px;
            height: 30px;
            background: var(--primary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: 10px;
        }

        .skill-info {
            flex: 1;
        }

        .skill-name {
            font-weight: bold;
            margin-bottom: 2px;
        }

        .skill-progress {
            height: 4px;
            background: var(--card-bg);
            border-radius: 2px;
            overflow: hidden;
            margin-top: 5px;
        }

        .skill-progress-fill {
            height: 100%;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            border-radius: 2px;
            transition: width 0.5s ease;
        }

        .theme-selector {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .theme-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 2px solid var(--border-color);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .theme-btn.active {
            border-color: var(--primary-color);
            transform: scale(1.1);
        }

        .theme-blue { background: linear-gradient(45deg, #3b82f6, #1d4ed8); }
        .theme-green { background: linear-gradient(45deg, #10b981, #047857); }
        .theme-purple { background: linear-gradient(45deg, #8b5cf6, #7c3aed); }
        .theme-orange { background: linear-gradient(45deg, #f59e0b, #d97706); }

        .story-character {
            text-align: center;
            margin: 20px 0;
        }

        .character-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            border: 3px solid var(--border-color);
        }

        .character-info {
            background: var(--card-bg);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid var(--border-color);
        }

        .character-name {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 5px;
        }

        .character-level {
            font-size: 0.9rem;
            color: #94a3b8;
        }

        .simulation-area {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            border: 1px solid var(--border-color);
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .simulation-controls {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .simulation-btn {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            color: var(--text-color);
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .simulation-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .ai-assistant {
            position: fixed;
            bottom: 20px;
            left: 20px;
            width: 60px;
            height: 60px;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 2000;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            font-size: 1.5rem;
        }

        .ai-assistant:hover {
            transform: scale(1.1);
        }

        .ai-chat {
            position: fixed;
            bottom: 90px;
            left: 20px;
            width: 300px;
            background: var(--card-bg);
            border-radius: 15px;
            border: 1px solid var(--border-color);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            z-index: 2000;
            backdrop-filter: blur(10px);
            display: none;
        }

        .ai-chat.active {
            display: block;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from {
                transform: translateY(20px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .ai-header {
            padding: 15px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .ai-messages {
            height: 200px;
            overflow-y: auto;
            padding: 15px;
        }

        .ai-input {
            padding: 15px;
            border-top: 1px solid var(--border-color);
        }

        .ai-input input {
            width: 100%;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-color);
            font-family: 'Tajawal', sans-serif;
        }

        @media (max-width: 768px) {
            .language-switch {
                top: 10px;
                left: 10px;
            }
            
            .lang-btn {
                padding: 6px 12px;
                font-size: 12px;
            }
            
            .advanced-options {
                flex-direction: column;
            }
            
            .advanced-options button {
                min-width: auto;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .header p {
                font-size: 1rem;
            }

            .ai-chat {
                width: calc(100vw - 40px);
                left: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="language-switch">
                <button class="lang-btn active" onclick="gameManager.switchLanguage('ar')">🌐 العربية</button>
                <button class="lang-btn" onclick="gameManager.switchLanguage('en')">🌐 English</button>
            </div>
            <h1>مدافع الأمن السيبراني</h1>
            <p>لعبة تعليمية عن الأمن السيبراني — فريق Zerox</p>
            <p style="margin-top: 10px; font-size: 0.9rem; color: #64748b;">تصميم: المهندس حيدر الجنابي</p>
        </div>
        
        <div class="main-content">
            <div class="content-area">
                <div class="card">
                    <h3>أهلاً بك أيها المدافع 🛡️</h3>
                    <p style="color: #94a3b8; margin-bottom: 20px;">احمِ الحسابات وتعلم أساسيات الحماية عبر أسئلة قصيرة وتحديات سريعة.</p>
                    
                    <div class="advanced-options">
                        <button class="game-btn" onclick="gameManager.startGame()">🎮 ابدأ اللعبة</button>
                        <button class="game-btn" onclick="gameManager.showHowToPlay()">📖 كيف تُلعب</button>
                    </div>
                    
                    <div style="margin-top: 20px;">
                        <h4>اختر مستوى:</h4>
                        <div class="advanced-options">
                            <button class="level-btn active" onclick="gameManager.selectLevel('easy')">🟢 سهلة</button>
                            <button class="level-btn" onclick="gameManager.selectLevel('medium')">🟡 متوسطة</button>
                            <button class="level-btn" onclick="gameManager.selectLevel('hard')">🔴 صعبة</button>
                        </div>
                    </div>
                </div>
                
                <!-- قسم جديد: الشخصية الافتراضية -->
                <div class="card">
                    <h3>👤 شخصيتك الافتراضية</h3>
                    <div class="story-character">
                        <div class="character-avatar">🛡️</div>
                        <div class="character-info">
                            <div class="character-name" id="characterName">المدافع الجديد</div>
                            <div class="character-level">المستوى: <span id="characterLevel">1</span></div>
                        </div>
                    </div>
                </div>
                
                <!-- قسم جديد: شجرة المهارات -->
                <div class="card">
                    <h3>🌳 شجرة المهارات</h3>
                    <div class="skills-tree">
                        <div class="skill-node unlocked">
                            <div class="skill-icon">🔒</div>
                            <div class="skill-info">
                                <div class="skill-name">أساسيات الأمن</div>
                                <div class="skill-progress">
                                    <div class="skill-progress-fill" style="width: 80%"></div>
                                </div>
                            </div>
                        </div>
                        <div class="skill-node">
                            <div class="skill-icon">🛡️</div>
                            <div class="skill-info">
                                <div class="skill-name">الحماية من التصيد</div>
                                <div class="skill-progress">
                                    <div class="skill-progress-fill" style="width: 40%"></div>
                                </div>
                            </div>
                        </div>
                        <div class="skill-node">
                            <div class="skill-icon">🔍</div>
                            <div class="skill-info">
                                <div class="skill-name">كشف التسلل</div>
                                <div class="skill-progress">
                                    <div class="skill-progress-fill" style="width: 20%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="advanced-section">
                    <div class="card">
                        <h3>🎯 الوضع المتقدم</h3>
                        <p style="color: #94a3b8; margin-bottom: 15px;">استكشف ميزات إضافية وأسئلة متقدمة</p>
                        <div class="advanced-options">
                            <button class="game-btn" onclick="gameManager.startAdvancedQuestions()">
                                🚀 الأسئلة المتقدمة
                            </button>
                            <button class="game-btn" onclick="gameManager.startDailyChallenge()">
                                🏆 التحديات اليومية
                            </button>
                            <button class="game-btn" onclick="gameManager.showLeaderboard()">
                                📊 لوحة المتصدرين
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- قسم جديد: الميداليات والإنجازات -->
                <div class="card">
                    <h3>🏆 الميداليات والإنجازات</h3>
                    <div class="achievements-grid">
                        <div class="achievement-card">
                            <div class="achievement-icon">🥇</div>
                            <div class="achievement-title">المبتدئ</div>
                            <div class="achievement-desc">أكمل 10 أسئلة</div>
                        </div>
                        <div class="achievement-card locked">
                            <div class="achievement-icon">🥈</div>
                            <div class="achievement-title">المحترف</div>
                            <div class="achievement-desc">أكمل 50 سؤالاً</div>
                        </div>
                        <div class="achievement-card locked">
                            <div class="achievement-icon">🥉</div>
                            <div class="achievement-title">الخبير</div>
                            <div class="achievement-desc">أكمل 100 سؤال</div>
                        </div>
                        <div class="achievement-card">
                            <div class="achievement-icon">⚡</div>
                            <div class="achievement-title">سريع</div>
                            <div class="achievement-desc">أجب على 5 أسئلة في دقيقة</div>
                        </div>
                    </div>
                </div>
                
                <!-- قسم جديد: محاكاة الهجمات -->
                <div class="card">
                    <h3>🛡️ محاكاة الدفاع</h3>
                    <div class="simulation-area">
                        <p style="color: #94a3b8; text-align: center; margin-bottom: 15px;">تدرب على مواجهة هجمات افتراضية</p>
                        <div class="simulation-controls">
                            <button class="simulation-btn" onclick="gameManager.startSimulation('phishing')">محاكاة التصيد</button>
                            <button class="simulation-btn" onclick="gameManager.startSimulation('ddos')">محاكاة DDoS</button>
                            <button class="simulation-btn" onclick="gameManager.startSimulation('malware')">محاكاة البرمجيات الخبيثة</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="sidebar">
                <div class="card">
                    <h3>📈 التقدم</h3>
                    <p style="color: #94a3b8; font-size: 0.9rem; margin-bottom: 10px;">مستوى واحد = 10 أسئلة</p>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: 0%;"></div>
                    </div>
                    <p style="text-align: center; font-size: 0.9rem;" id="progressText">السؤال 0 من 10</p>
                </div>
                
                <div class="card">
                    <h3>🎯 مستوى اللعبة</h3>
                    <p style="color: #94a3b8; font-size: 0.9rem; margin: 10px 0;">اختر مستوى قبل البدء</p>
                    <div style="display: flex; gap: 10px;">
                        <button class="level-btn active" onclick="gameManager.selectLevel('easy')">سهل</button>
                        <button class="level-btn" onclick="gameManager.selectLevel('medium')">متوسط</button>
                        <button class="level-btn" onclick="gameManager.selectLevel('hard')">صعب</button>
                    </div>
                </div>
                
                <div class="card">
                    <h3>⭐ سجل اللعبة</h3>
                    <p style="color: #94a3b8; font-size: 0.9rem; margin: 10px 0;">أعلى نتيجة</p>
                    <div style="text-align: center; font-size: 2rem; font-weight: bold; color: var(--primary-color); margin: 15px 0;" id="highScore">0</div>
                    <div style="display: flex; gap: 10px;">
                        <button class="game-btn" style="background: rgba(239, 68, 68, 0.2); color: #ef4444;" onclick="gameManager.deleteRecord()">🗑️ حذف السجل</button>
                        <button class="game-btn" style="background: rgba(59, 130, 246, 0.2); color: #3b82f6;" onclick="gameManager.copyScore()">📋 نسخ</button>
                    </div>
                </div>
                
                <div class="card">
                    <h3>التحدي اليومي</h3>
                    <p style="color: #94a3b8; font-size: 0.9rem; margin: 10px 0;">اكسب 200 نقطة إضافية!</p>
                    <button class="game-btn" style="background: linear-gradient(45deg, #ff6b6b, #ee5a24); color: white; width: 100%;" onclick="gameManager.startDailyChallenge()">
                        بدء التحدي
                    </button>
                </div>
                
                <!-- قسم جديد: الثيمات -->
                <div class="card">
                    <h3>🎨 تخصيص الثيم</h3>
                    <p style="color: #94a3b8; font-size: 0.9rem; margin: 10px 0;">اختر اللون المفضل</p>
                    <div class="theme-selector">
                        <div class="theme-btn theme-blue active" onclick="gameManager.changeTheme('blue')"></div>
                        <div class="theme-btn theme-green" onclick="gameManager.changeTheme('green')"></div>
                        <div class="theme-btn theme-purple" onclick="gameManager.changeTheme('purple')"></div>
                        <div class="theme-btn theme-orange" onclick="gameManager.changeTheme('orange')"></div>
                    </div>
                </div>
                
                <!-- قسم جديد: الإحصائيات -->
                <div class="card">
                    <h3>📊 إحصائياتك</h3>
                    <div style="margin-top: 10px;">
                        <div style="display: flex; justify-content: space-between; margin: 8px 0;">
                            <span>إجمالي الأسئلة:</span>
                            <span id="totalQuestions">0</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin: 8px 0;">
                            <span>الإجابات الصحيحة:</span>
                            <span id="correctAnswers">0</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin: 8px 0;">
                            <span>نسبة النجاح:</span>
                            <span id="successRate">0%</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin: 8px 0;">
                            <span>الوقت المستغرق:</span>
                            <span id="timeSpent">0 د</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- مساعد الذكاء الاصطناعي -->
    <div class="ai-assistant" onclick="gameManager.toggleAIChat()">
        🤖
    </div>
    
    <div class="ai-chat" id="aiChat">
        <div class="ai-header">
            <span>مساعد الأمن السيبراني</span>
            <button onclick="gameManager.toggleAIChat()" style="background: none; border: none; color: var(--text-color); cursor: pointer;">✕</button>
        </div>
        <div class="ai-messages" id="aiMessages">
            <div style="text-align: center; color: #94a3b8; padding: 20px;">
                مرحباً! أنا مساعدك في الأمن السيبراني. كيف يمكنني مساعدتك؟
            </div>
        </div>
        <div class="ai-input">
            <input type="text" id="aiInput" placeholder="اكتب سؤالك هنا..." onkeypress="if(event.key=='Enter') gameManager.sendAIMessage()">
        </div>
    </div>

    <script>
        // نظام إدارة اللعبة المحسن
        const gameManager = {
            currentLanguage: 'ar',
            currentLevel: 'easy',
            currentQuestion: 0,
            score: 0,
            questions: [],
            leaderboard: [],
            playerStats: {
                totalQuestions: 0,
                correctAnswers: 0,
                timeSpent: 0,
                achievements: []
            },
            character: {
                name: "المدافع الجديد",
                level: 1,
                xp: 0,
                skills: {
                    basics: 80,
                    phishing: 40,
                    intrusion: 20
                }
            },
            
            init() {
                this.loadQuestions();
                this.loadLeaderboard();
                this.loadHighScore();
                this.loadPlayerStats();
                this.updateStatsDisplay();
                this.startTimer();
                this.showMessage('🎮 مرحباً بك في مدافع الأمن السيبراني!', 'success');
            },
            
            loadQuestions() {
                // نفس الأسئلة السابقة مع إضافة أسئلة جديدة
                this.questions = {
                    easy: [
                        // ... الأسئلة السابقة ...
                    ],
                    medium: [
                        // ... الأسئلة السابقة ...
                    ],
                    hard: [
                        // ... الأسئلة السابقة ...
                    ],
                    advanced: [
                        // ... الأسئلة السابقة ...
                    ],
                    daily: [
                        // ... الأسئلة السابقة ...
                    ],
                    simulation: [
                        {
                            question: { ar: "كيف تتعرف على بريد تصيد احتيالي؟", en: "How do you identify a phishing email?" },
                            answers: {
                                ar: ["عنوان المرسل غير مألوف", "يطلب معلومات شخصية", "يحتوي على أخطاء إملائية", "جميع ما سبق"],
                                en: ["Unfamiliar sender address", "Requests personal information", "Contains spelling errors", "All of the above"]
                            },
                            correct: 3
                        }
                    ]
                };
            },
            
            // الدوال الأساسية المحسنة
            startGame() {
                const questions = this.questions[this.currentLevel];
                if (!questions || questions.length === 0) {
                    this.showMessage('❌ لا توجد أسئلة متاحة لهذا المستوى', 'error');
                    return;
                }
                
                this.currentQuestion = 0;
                this.score = 0;
                this.updateProgress();
                this.showGameQuestion(questions, 'normal');
            },
            
            // دوال جديدة للميزات المضافة
            startSimulation(type) {
                this.showMessage(`🛡️ بدء محاكاة ${type}...`, 'info');
                // محاكاة تفاعلية للهجمات
                setTimeout(() => {
                    this.showGameQuestion(this.questions.simulation, 'simulation');
                }, 1000);
            },
            
            changeTheme(theme) {
                const themes = {
                    blue: { primary: '#3b82f6', secondary: '#1d4ed8' },
                    green: { primary: '#10b981', secondary: '#047857' },
                    purple: { primary: '#8b5cf6', secondary: '#7c3aed' },
                    orange: { primary: '#f59e0b', secondary: '#d97706' }
                };
                
                const selected = themes[theme];
                document.documentElement.style.setProperty('--primary-color', selected.primary);
                document.documentElement.style.setProperty('--secondary-color', selected.secondary);
                
                // تحديث الأزرار النشطة
                document.querySelectorAll('.theme-btn').forEach(btn => btn.classList.remove('active'));
                event.target.classList.add('active');
                
                this.showMessage(`🎨 تم تغيير الثيم إلى ${theme}`, 'success');
            },
            
            toggleAIChat() {
                const chat = document.getElementById('aiChat');
                chat.classList.toggle('active');
            },
            
            sendAIMessage() {
                const input = document.getElementById('aiInput');
                const messages = document.getElementById('aiMessages');
                const question = input.value.trim();
                
                if (question) {
                    // إضافة سؤال المستخدم
                    messages.innerHTML += `
                        <div style="text-align: left; margin: 10px 0; padding: 10px; background: rgba(59, 130, 246, 0.2); border-radius: 10px; margin-left: 50px;">
                            ${question}
                        </div>
                    `;
                    
                    // محاكاة رد الذكاء الاصطناعي
                    const responses = {
                        ar: [
                            "لحماية حسابك، استخدم كلمات مرور قوية وفعل المصادقة الثنائية.",
                            "التصيد الاحتيالي هو محاولة خداعك لكشف معلوماتك الشخصية.",
                            "احرص على تحديث برامجك باستمرار لإصلاح الثغرات الأمنية.",
                            "استخدم شبكات VPN عند الاتصال بشبكات WiFi العامة.",
                            "النسخ الاحتياطي المنتظم يحمي بياناتك من الفقدان."
                        ],
                        en: [
                            "To protect your account, use strong passwords and enable two-factor authentication.",
                            "Phishing is an attempt to trick you into revealing personal information.",
                            "Keep your software updated to fix security vulnerabilities.",
                            "Use VPN when connecting to public WiFi networks.",
                            "Regular backups protect your data from loss."
                        ]
                    };
                    
                    const randomResponse = responses[this.currentLanguage][Math.floor(Math.random() * responses[this.currentLanguage].length)];
                    
                    setTimeout(() => {
                        messages.innerHTML += `
                            <div style="text-align: right; margin: 10px 0; padding: 10px; background: rgba(45, 212, 191, 0.2); border-radius: 10px; margin-right: 50px;">
                                ${randomResponse}
                            </div>
                        `;
                        messages.scrollTop = messages.scrollHeight;
                    }, 1000);
                    
                    input.value = '';
                }
            },
            
            updateStatsDisplay() {
                document.getElementById('totalQuestions').textContent = this.playerStats.totalQuestions;
                document.getElementById('correctAnswers').textContent = this.playerStats.correctAnswers;
                document.getElementById('successRate').textContent = 
                    this.playerStats.totalQuestions > 0 
                    ? Math.round((this.playerStats.correctAnswers / this.playerStats.totalQuestions) * 100) + '%'
                    : '0%';
                document.getElementById('timeSpent').textContent = Math.floor(this.playerStats.timeSpent / 60) + ' د';
                
                // تحديث معلومات الشخصية
                document.getElementById('characterName').textContent = this.character.name;
                document.getElementById('characterLevel').textContent = this.character.level;
            },
            
            startTimer() {
                setInterval(() => {
                    this.playerStats.timeSpent++;
                    this.updateStatsDisplay();
                }, 1000);
            },
            
            loadPlayerStats() {
                const saved = localStorage.getItem('cyber_defender_stats');
                if (saved) {
                    this.playerStats = JSON.parse(saved);
                }
            },
            
            savePlayerStats() {
                localStorage.setItem('cyber_defender_stats', JSON.stringify(this.playerStats));
            },
            
            // ... بقية الدوال الأساسية من الكود الأصلي ...
            
            checkAnswer(selected, correct, mode) {
                this.playerStats.totalQuestions++;
                if (selected === correct) {
                    this.playerStats.correctAnswers++;
                }
                this.savePlayerStats();
                this.updateStatsDisplay();
                
                // ... بقية كود checkAnswer ...
            },
            
            // ... جميع الدوال الأخرى من الكود الأصلي ...
        };

        // بدء اللعبة عند تحميل الصفحة
        document.addEventListener('DOMContentLoaded', function() {
            gameManager.init();
            gameManager.updateTexts();
        });
    </script>
</body>
</html>
